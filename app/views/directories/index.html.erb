<h1 class="page-title">Directories</h1>

<ul class="directory-list">
  <% @directories.each do |directory| %>
    <li class="directory-item">
      <div class="directory-info">
        <span class="directory-name"><%= directory.name %></span>
        <%= link_to 'Delete', directory_path(directory), method: :delete, class: "delete-link" %>
        <%= link_to 'Show', directory_path(directory), class: "show-link" %>
      </div>
      <ul class="subdirectory-list">
        <% directory.children.each do |subdirectory| %>
          <li class="subdirectory-item"><%= subdirectory.name %></li>
        <% end %>
        <% directory.aws_files.each do |aws_file| %>
          <li class="aws-file-item">
            <span class="file-name"><%= aws_file.name %></span>
            <%= link_to 'Download', aws_file.download_url, class: "download-link" %>
            <%= link_to 'Delete File', directory_aws_files_path(aws_file), method: :delete, data: { confirm: 'Are you sure you want to delete this file?' }, class: "delete-file-link" %>
          </li>
        <% end %>
      </ul>
    </li>
  <% end %>
</ul>

<%= link_to 'New Directory', new_directory_path, class: "new-directory-link" %>
